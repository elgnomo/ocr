{"version":3,"sources":["template.js","app/controllers/index.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ADzFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"/Users/user001/Documents/Appcelerator_Studio_Workspace/ocr/Resources/android/alloy/controllers/index.js","sourceRoot":"/Users/user001/Documents/Appcelerator_Studio_Workspace/ocr","sourcesContent":["var Alloy = require('/alloy'),\n\tBackbone = Alloy.Backbone,\n\t_ = Alloy._;\n\n\n\n\nfunction __processArg(obj, key) {\n\tvar arg = null;\n\tif (obj) {\n\t\targ = obj[key] || null;\n\t}\n\treturn arg;\n}\n\nfunction Controller() {\n\t\n\trequire('/alloy/controllers/' + 'BaseController').apply(this, Array.prototype.slice.call(arguments));\n\tthis.__controllerPath = 'index';\n\tthis.args = arguments[0] || {};\n\n\tif (arguments[0]) {\n\t\tvar __parentSymbol = __processArg(arguments[0], '__parentSymbol');\n\t\tvar $model = __processArg(arguments[0], '$model');\n\t\tvar __itemTemplate = __processArg(arguments[0], '__itemTemplate');\n\t}\n\tvar $ = this;\n\tvar exports = {};\n\tvar __defers = {};\n\n\t// Generated code that must be executed before all UI and/or\n\t// controller code. One example is all model and collection\n\t// declarations from markup.\n\t\n\n\t// Generated UI code\n\t$.__views.index = Ti.UI.createWindow(\n{backgroundColor:\"#ffffff\",theme:\"Theme.AppCompat.Translucent.NoTitleBar.Fullscreen\",exitOnClose:true,id:\"index\",}\n);\n$.__views.index && $.addTopLevelView($.__views.index);\n$.__views.celdaFotos = Ti.UI.createView(\n{top:\"60dp\",bottom:0,id:\"celdaFotos\",}\n);\n$.__views.index.add($.__views.celdaFotos);\n$.__views.topCredencial = Ti.UI.createView(\n{top:0,height:\"50%\",width:Ti.UI.FILL,id:\"topCredencial\",}\n);\n$.__views.celdaFotos.add($.__views.topCredencial);\n$.__views.frontal = Ti.UI.createView(\n{borderRadius:\"30dp\",height:\"90%\",width:Ti.UI.FILL,borderColor:\"#B9CFE2\",touchEnabled:false,id:\"frontal\",}\n);\n$.__views.topCredencial.add($.__views.frontal);\n$.__views.bottomCredencial = Ti.UI.createView(\n{bottom:0,height:\"50%\",width:Ti.UI.FILL,id:\"bottomCredencial\",}\n);\n$.__views.celdaFotos.add($.__views.bottomCredencial);\n$.__views.reverso = Ti.UI.createView(\n{borderRadius:\"30dp\",height:\"90%\",width:Ti.UI.FILL,borderColor:\"#B9CFE2\",touchEnabled:false,id:\"reverso\",}\n);\n$.__views.bottomCredencial.add($.__views.reverso);\nexports.destroy = function () {};\n\n\t// make all IDed elements in $.__views available right on the $ in a\n\t// controller's internal code. Externally the IDed elements will\n\t// be accessed with getView().\n\t_.extend($, $.__views);\n\n\t// Controller code directly from the developer's controller file\n\t__MAPMARKER_CONTROLLER_CODE__\n\n\t// Generated code that must be executed after all UI and\n\t// controller code. One example deferred event handlers whose\n\t// functions are not defined until after the controller code\n\t// is executed.\n\t\n\n\t// Extend the $ instance with all functions and properties\n\t// defined on the exports object.\n\t_.extend($, exports);\n}\n\nmodule.exports = Controller;\n","var imagenFrontal = Ti.UI.createImageView({\n  width: \"100%\",\n  height: \"100%\",\n  autorotate: true });\n\n\n\n$.topCredencial.addEventListener('click', function (e) {\n  if (Ti.Media.hasCameraPermissions()) {\n    openCameraf();\n  } else {\n    Ti.Media.requestCameraPermissions(function (e) {\n      if (e.success) {\n        openCameraf();\n      } else {\n        alert('You denied permission');\n      }\n    });\n  }\n});\n\nvar image;\n\nfunction openCameraf() {\n  $.frontal.add(imagenFrontal);\n  var dialog = Titanium.UI.createOptionDialog({\n    title: 'Seleccion el Tipo de Imagen',\n    options: ['Camara', 'Galeria de Fotos', 'Cancelar'],\n    cancel: 2 });\n\n  dialog.addEventListener('click', function (e) {\n    if (e.index == 0) {\n      Titanium.Media.showCamera({\n        success: function (e) {\n          image = e.media;\n          if (e.mediaType == Ti.Media.MEDIA_TYPE_PHOTO) {\n            imagenFrontal.image = image;\n            var url = 'https://www.ideashappy.com/ahorra/otro.php';\n            //var url = \"http://www.mark-43.net/mark43-service/v1/api-drive/subir-imagen\"\n            var xhr = Titanium.Network.createHTTPClient({\n              onload: function (e) {\n                Ti.API.info('Info received from the uploading: ' + this.responseText);\n                // var json = JSON.parse(this.responseText);\n                // console.log(\"JSON = \", json);\n              },\n              onerror: function (e) {\n                console.log(\"Error\", e);\n              },\n              timeout: 200000 });\n\n\n            var params = {\n              myfile: e.media };\n\n            var alerta = JSON.stringify(e.media);\n            alert(alerta);\n            xhr.open(\"POST\", url);\n            xhr.setRequestHeader('Content-Type', 'multipart/form-data');\n            xhr.send(alerta);\n            //console.log(\"Paramatros =\", params);\n          }\n        },\n        cancel: function () {},\n        error: function (error) {\n          var a = Titanium.UI.createAlertDialog({\n            title: 'Camera' });\n\n          if (error.code == Titanium.Media.NO_CAMERA) {\n            a.setMessage('Device does not have camera');\n          } else {\n            a.setMessage('Unexpected error: ' + error.code);\n          }\n          a.show();\n        },\n        allowImageEditing: true,\n        saveToPhotoGallery: true });\n\n    } else if (e.index == 1) {\n      Titanium.Media.openPhotoGallery({\n        success: function (e) {\n          image = e.media;\n          if (e.mediaType == Ti.Media.MEDIA_TYPE_PHOTO) {\n            imagenFrontal.image = image;\n            var url = 'https://www.ideashappy.com/ahorra/otro.php';\n            //var url = \"http://www.mark-43.net/mark43-service/v1/api-drive/subir-imagen\"\n            var xhr = Titanium.Network.createHTTPClient({\n              onload: function (e) {\n                console.log('url ', url);\n                console.log('Info received from the uploading: ' + this.responseText);\n                console.log(\"parametro = \", alerta);\n                // var json = JSON.parse(this.responseText);\n                // console.log(\"JSON = \", json);\n              },\n              onerror: function (e) {\n                console.log(\"Error\", e);\n              },\n              timeout: 200000 });\n\n\n            var params = {\n              myfile: e.media };\n\n            var alerta = JSON.stringify(params);\n            //alert(alerta);\n            xhr.open(\"POST\", url);\n            xhr.setRequestHeader('Content-Type', 'multipart/form-data');\n            xhr.send(alerta);\n            console.log(\"ALERTA = \", alerta);\n\n          }\n        },\n        cancel: function () {\n          //user cancelled the action fron within\n          //the photo gallery\n        } });\n\n    } else {\n      //cancel was tapped\n      //user opted not to choose a photo\n    }\n  });\n  dialog.show();\n}\n\n\nvar imagenReverso = Ti.UI.createImageView({\n  width: \"100%\",\n  height: \"100%\",\n  autorotate: true });\n\n\n$.bottomCredencial.addEventListener('click', function (e) {\n  if (Ti.Media.hasCameraPermissions()) {\n    openCamerar();\n  } else {\n    Ti.Media.requestCameraPermissions(function (e) {\n      if (e.success) {\n        openCamerar();\n      } else {\n        alert('You denied permission');\n      }\n    });\n  }\n});\n\n\nfunction openCamerar() {\n  $.bottomCredencial.add(imagenReverso);\n  Ti.Media.showCamera({\n    success: function (e) {\n      // display image information:\n      console.log(e.media);\n      imagenReverso.image = e.media;\n    } });\n\n}\n\n\n$.index.open();"]}