var Alloy = require('/alloy'),
Backbone = Alloy.Backbone,
_ = Alloy._;




function __processArg(obj, key) {
  var arg = null;
  if (obj) {
    arg = obj[key] || null;
  }
  return arg;
}

function Controller() {

  require('/alloy/controllers/' + 'BaseController').apply(this, Array.prototype.slice.call(arguments));
  this.__controllerPath = 'index';
  this.args = arguments[0] || {};

  if (arguments[0]) {
    var __parentSymbol = __processArg(arguments[0], '__parentSymbol');
    var $model = __processArg(arguments[0], '$model');
    var __itemTemplate = __processArg(arguments[0], '__itemTemplate');
  }
  var $ = this;
  var exports = {};
  var __defers = {};

  // Generated code that must be executed before all UI and/or
  // controller code. One example is all model and collection
  // declarations from markup.


  // Generated UI code
  $.__views.index = Ti.UI.createWindow(
  { backgroundColor: "#ffffff", theme: "Theme.AppCompat.Translucent.NoTitleBar.Fullscreen", exitOnClose: true, id: "index" });

  $.__views.index && $.addTopLevelView($.__views.index);
  $.__views.celdaFotos = Ti.UI.createView(
  { top: "60dp", bottom: 0, id: "celdaFotos" });

  $.__views.index.add($.__views.celdaFotos);
  $.__views.topCredencial = Ti.UI.createView(
  { top: 0, height: "50%", width: Ti.UI.FILL, id: "topCredencial" });

  $.__views.celdaFotos.add($.__views.topCredencial);
  $.__views.frontal = Ti.UI.createView(
  { borderRadius: "30dp", height: "90%", width: Ti.UI.FILL, borderColor: "#B9CFE2", touchEnabled: false, id: "frontal" });

  $.__views.topCredencial.add($.__views.frontal);
  $.__views.bottomCredencial = Ti.UI.createView(
  { bottom: 0, height: "50%", width: Ti.UI.FILL, id: "bottomCredencial" });

  $.__views.celdaFotos.add($.__views.bottomCredencial);
  $.__views.reverso = Ti.UI.createView(
  { borderRadius: "30dp", height: "90%", width: Ti.UI.FILL, borderColor: "#B9CFE2", touchEnabled: false, id: "reverso" });

  $.__views.bottomCredencial.add($.__views.reverso);
  exports.destroy = function () {};

  // make all IDed elements in $.__views available right on the $ in a
  // controller's internal code. Externally the IDed elements will
  // be accessed with getView().
  _.extend($, $.__views);

  // Controller code directly from the developer's controller file
  var imagenFrontal = Ti.UI.createImageView({
    width: "100%",
    height: "100%",
    autorotate: true });



  $.topCredencial.addEventListener('click', function (e) {
    if (Ti.Media.hasCameraPermissions()) {
      openCameraf();
    } else {
      Ti.Media.requestCameraPermissions(function (e) {
        if (e.success) {
          openCameraf();
        } else {
          alert('You denied permission');
        }
      });
    }
  });

  var image;

  function openCameraf() {
    $.frontal.add(imagenFrontal);
    var dialog = Titanium.UI.createOptionDialog({
      title: 'Seleccion el Tipo de Imagen',
      options: ['Camara', 'Galeria de Fotos', 'Cancelar'],
      cancel: 2 });

    dialog.addEventListener('click', function (e) {
      if (e.index == 0) {
        Titanium.Media.showCamera({
          success: function (e) {
            image = e.media;
            if (e.mediaType == Ti.Media.MEDIA_TYPE_PHOTO) {
              imagenFrontal.image = image;
              var url = 'https://www.ideashappy.com/ahorra/otro.php';
              //var url = "http://www.mark-43.net/mark43-service/v1/api-drive/subir-imagen"
              var xhr = Titanium.Network.createHTTPClient({
                onload: function (e) {
                  Ti.API.info('Info received from the uploading: ' + this.responseText);
                  // var json = JSON.parse(this.responseText);
                  // console.log("JSON = ", json);
                },
                onerror: function (e) {
                  console.log("Error", e);
                },
                timeout: 200000 });


              var params = {
                myfile: e.media };

              var alerta = JSON.stringify(e.media);
              alert(alerta);
              xhr.open("POST", url);
              xhr.setRequestHeader('Content-Type', 'multipart/form-data');
              xhr.send(alerta);
              //console.log("Paramatros =", params);
            }
          },
          cancel: function () {},
          error: function (error) {
            var a = Titanium.UI.createAlertDialog({
              title: 'Camera' });

            if (error.code == Titanium.Media.NO_CAMERA) {
              a.setMessage('Device does not have camera');
            } else {
              a.setMessage('Unexpected error: ' + error.code);
            }
            a.show();
          },
          allowImageEditing: true,
          saveToPhotoGallery: true });

      } else if (e.index == 1) {
        Titanium.Media.openPhotoGallery({
          success: function (e) {
            image = e.media;
            if (e.mediaType == Ti.Media.MEDIA_TYPE_PHOTO) {
              imagenFrontal.image = image;
              var url = 'https://www.ideashappy.com/ahorra/otro.php';
              //var url = "http://www.mark-43.net/mark43-service/v1/api-drive/subir-imagen"
              var xhr = Titanium.Network.createHTTPClient({
                onload: function (e) {
                  console.log('url ', url);
                  console.log('Info received from the uploading: ' + this.responseText);
                  console.log("parametro = ", alerta);
                  // var json = JSON.parse(this.responseText);
                  // console.log("JSON = ", json);
                },
                onerror: function (e) {
                  console.log("Error", e);
                },
                timeout: 200000 });


              var params = {
                myfile: e.media };

              var alerta = JSON.stringify(params);
              //alert(alerta);
              xhr.open("POST", url);
              xhr.setRequestHeader('Content-Type', 'multipart/form-data');
              xhr.send(alerta);
              console.log("ALERTA = ", alerta);

            }
          },
          cancel: function () {
            //user cancelled the action fron within
            //the photo gallery
          } });

      } else {
        //cancel was tapped
        //user opted not to choose a photo
      }
    });
    dialog.show();
  }


  var imagenReverso = Ti.UI.createImageView({
    width: "100%",
    height: "100%",
    autorotate: true });


  $.bottomCredencial.addEventListener('click', function (e) {
    if (Ti.Media.hasCameraPermissions()) {
      openCamerar();
    } else {
      Ti.Media.requestCameraPermissions(function (e) {
        if (e.success) {
          openCamerar();
        } else {
          alert('You denied permission');
        }
      });
    }
  });


  function openCamerar() {
    $.bottomCredencial.add(imagenReverso);
    Ti.Media.showCamera({
      success: function (e) {
        // display image information:
        console.log(e.media);
        imagenReverso.image = e.media;
      } });

  }


  $.index.open();

  // Generated code that must be executed after all UI and
  // controller code. One example deferred event handlers whose
  // functions are not defined until after the controller code
  // is executed.


  // Extend the $ instance with all functions and properties
  // defined on the exports object.
  _.extend($, exports);
}

module.exports = Controller;

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRlbXBsYXRlLmpzIiwiaW5kZXguanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsSUFBQSxLQUFBLEdBQUEsT0FBQSxDQUFBLFFBQUEsQ0FBQTtBQUNBLFFBQUEsR0FBQSxLQUFBLENBQUEsUUFEQTtBQUVBLENBQUEsR0FBQSxLQUFBLENBQUEsQ0FGQTs7Ozs7QUFPQSxTQUFBLFlBQUEsQ0FBQSxHQUFBLEVBQUEsR0FBQSxFQUFBO0FBQ0EsTUFBQSxHQUFBLEdBQUEsSUFBQTtBQUNBLE1BQUEsR0FBQSxFQUFBO0FBQ0EsSUFBQSxHQUFBLEdBQUEsR0FBQSxDQUFBLEdBQUEsQ0FBQSxJQUFBLElBQUE7QUFDQTtBQUNBLFNBQUEsR0FBQTtBQUNBOztBQUVBLFNBQUEsVUFBQSxHQUFBOztBQUVBLEVBQUEsT0FBQSxDQUFBLHdCQUFBLGdCQUFBLENBQUEsQ0FBQSxLQUFBLENBQUEsSUFBQSxFQUFBLEtBQUEsQ0FBQSxTQUFBLENBQUEsS0FBQSxDQUFBLElBQUEsQ0FBQSxTQUFBLENBQUE7QUFDQSxPQUFBLGdCQUFBLEdBQUEsT0FBQTtBQUNBLE9BQUEsSUFBQSxHQUFBLFNBQUEsQ0FBQSxDQUFBLENBQUEsSUFBQSxFQUFBOztBQUVBLE1BQUEsU0FBQSxDQUFBLENBQUEsQ0FBQSxFQUFBO0FBQ0EsUUFBQSxjQUFBLEdBQUEsWUFBQSxDQUFBLFNBQUEsQ0FBQSxDQUFBLENBQUEsRUFBQSxnQkFBQSxDQUFBO0FBQ0EsUUFBQSxNQUFBLEdBQUEsWUFBQSxDQUFBLFNBQUEsQ0FBQSxDQUFBLENBQUEsRUFBQSxRQUFBLENBQUE7QUFDQSxRQUFBLGNBQUEsR0FBQSxZQUFBLENBQUEsU0FBQSxDQUFBLENBQUEsQ0FBQSxFQUFBLGdCQUFBLENBQUE7QUFDQTtBQUNBLE1BQUEsQ0FBQSxHQUFBLElBQUE7QUFDQSxNQUFBLE9BQUEsR0FBQSxFQUFBO0FBQ0EsTUFBQSxRQUFBLEdBQUEsRUFBQTs7QUFFQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0EsRUFBQSxDQUFBLENBQUEsT0FBQSxDQUFBLEtBQUEsR0FBQSxFQUFBLENBQUEsRUFBQSxDQUFBLFlBQUE7QUFDQSxJQUFBLGVBQUEsRUFBQSxTQUFBLEVBQUEsS0FBQSxFQUFBLG1EQUFBLEVBQUEsV0FBQSxFQUFBLElBQUEsRUFBQSxFQUFBLEVBQUEsT0FBQSxFQURBLENBQUE7O0FBR0EsRUFBQSxDQUFBLENBQUEsT0FBQSxDQUFBLEtBQUEsSUFBQSxDQUFBLENBQUEsZUFBQSxDQUFBLENBQUEsQ0FBQSxPQUFBLENBQUEsS0FBQSxDQUFBO0FBQ0EsRUFBQSxDQUFBLENBQUEsT0FBQSxDQUFBLFVBQUEsR0FBQSxFQUFBLENBQUEsRUFBQSxDQUFBLFVBQUE7QUFDQSxJQUFBLEdBQUEsRUFBQSxNQUFBLEVBQUEsTUFBQSxFQUFBLENBQUEsRUFBQSxFQUFBLEVBQUEsWUFBQSxFQURBLENBQUE7O0FBR0EsRUFBQSxDQUFBLENBQUEsT0FBQSxDQUFBLEtBQUEsQ0FBQSxHQUFBLENBQUEsQ0FBQSxDQUFBLE9BQUEsQ0FBQSxVQUFBO0FBQ0EsRUFBQSxDQUFBLENBQUEsT0FBQSxDQUFBLGFBQUEsR0FBQSxFQUFBLENBQUEsRUFBQSxDQUFBLFVBQUE7QUFDQSxJQUFBLEdBQUEsRUFBQSxDQUFBLEVBQUEsTUFBQSxFQUFBLEtBQUEsRUFBQSxLQUFBLEVBQUEsRUFBQSxDQUFBLEVBQUEsQ0FBQSxJQUFBLEVBQUEsRUFBQSxFQUFBLGVBQUEsRUFEQSxDQUFBOztBQUdBLEVBQUEsQ0FBQSxDQUFBLE9BQUEsQ0FBQSxVQUFBLENBQUEsR0FBQSxDQUFBLENBQUEsQ0FBQSxPQUFBLENBQUEsYUFBQTtBQUNBLEVBQUEsQ0FBQSxDQUFBLE9BQUEsQ0FBQSxPQUFBLEdBQUEsRUFBQSxDQUFBLEVBQUEsQ0FBQSxVQUFBO0FBQ0EsSUFBQSxZQUFBLEVBQUEsTUFBQSxFQUFBLE1BQUEsRUFBQSxLQUFBLEVBQUEsS0FBQSxFQUFBLEVBQUEsQ0FBQSxFQUFBLENBQUEsSUFBQSxFQUFBLFdBQUEsRUFBQSxTQUFBLEVBQUEsWUFBQSxFQUFBLEtBQUEsRUFBQSxFQUFBLEVBQUEsU0FBQSxFQURBLENBQUE7O0FBR0EsRUFBQSxDQUFBLENBQUEsT0FBQSxDQUFBLGFBQUEsQ0FBQSxHQUFBLENBQUEsQ0FBQSxDQUFBLE9BQUEsQ0FBQSxPQUFBO0FBQ0EsRUFBQSxDQUFBLENBQUEsT0FBQSxDQUFBLGdCQUFBLEdBQUEsRUFBQSxDQUFBLEVBQUEsQ0FBQSxVQUFBO0FBQ0EsSUFBQSxNQUFBLEVBQUEsQ0FBQSxFQUFBLE1BQUEsRUFBQSxLQUFBLEVBQUEsS0FBQSxFQUFBLEVBQUEsQ0FBQSxFQUFBLENBQUEsSUFBQSxFQUFBLEVBQUEsRUFBQSxrQkFBQSxFQURBLENBQUE7O0FBR0EsRUFBQSxDQUFBLENBQUEsT0FBQSxDQUFBLFVBQUEsQ0FBQSxHQUFBLENBQUEsQ0FBQSxDQUFBLE9BQUEsQ0FBQSxnQkFBQTtBQUNBLEVBQUEsQ0FBQSxDQUFBLE9BQUEsQ0FBQSxPQUFBLEdBQUEsRUFBQSxDQUFBLEVBQUEsQ0FBQSxVQUFBO0FBQ0EsSUFBQSxZQUFBLEVBQUEsTUFBQSxFQUFBLE1BQUEsRUFBQSxLQUFBLEVBQUEsS0FBQSxFQUFBLEVBQUEsQ0FBQSxFQUFBLENBQUEsSUFBQSxFQUFBLFdBQUEsRUFBQSxTQUFBLEVBQUEsWUFBQSxFQUFBLEtBQUEsRUFBQSxFQUFBLEVBQUEsU0FBQSxFQURBLENBQUE7O0FBR0EsRUFBQSxDQUFBLENBQUEsT0FBQSxDQUFBLGdCQUFBLENBQUEsR0FBQSxDQUFBLENBQUEsQ0FBQSxPQUFBLENBQUEsT0FBQTtBQUNBLEVBQUEsT0FBQSxDQUFBLE9BQUEsR0FBQSxZQUFBLENBQUEsQ0FBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxFQUFBLENBQUEsQ0FBQSxNQUFBLENBQUEsQ0FBQSxFQUFBLENBQUEsQ0FBQSxPQUFBOztBQUVBO0FDbkVBLE1BQUEsYUFBQSxHQUFBLEVBQUEsQ0FBQSxFQUFBLENBQUEsZUFBQSxDQUFBO0FBQ0EsSUFBQSxLQUFBLEVBQUEsTUFEQTtBQUVBLElBQUEsTUFBQSxFQUFBLE1BRkE7QUFHQSxJQUFBLFVBQUEsRUFBQSxJQUhBLEVBQUEsQ0FBQTs7OztBQU9BLEVBQUEsQ0FBQSxDQUFBLGFBQUEsQ0FBQSxnQkFBQSxDQUFBLE9BQUEsRUFBQSxVQUFBLENBQUEsRUFBQTtBQUNBLFFBQUEsRUFBQSxDQUFBLEtBQUEsQ0FBQSxvQkFBQSxFQUFBLEVBQUE7QUFDQSxNQUFBLFdBQUE7QUFDQSxLQUZBLE1BRUE7QUFDQSxNQUFBLEVBQUEsQ0FBQSxLQUFBLENBQUEsd0JBQUEsQ0FBQSxVQUFBLENBQUEsRUFBQTtBQUNBLFlBQUEsQ0FBQSxDQUFBLE9BQUEsRUFBQTtBQUNBLFVBQUEsV0FBQTtBQUNBLFNBRkEsTUFFQTtBQUNBLFVBQUEsS0FBQSxDQUFBLHVCQUFBLENBQUE7QUFDQTtBQUNBLE9BTkE7QUFPQTtBQUNBLEdBWkE7O0FBY0EsTUFBQSxLQUFBOztBQUVBLFdBQUEsV0FBQSxHQUFBO0FBQ0EsSUFBQSxDQUFBLENBQUEsT0FBQSxDQUFBLEdBQUEsQ0FBQSxhQUFBO0FBQ0EsUUFBQSxNQUFBLEdBQUEsUUFBQSxDQUFBLEVBQUEsQ0FBQSxrQkFBQSxDQUFBO0FBQ0EsTUFBQSxLQUFBLEVBQUEsNkJBREE7QUFFQSxNQUFBLE9BQUEsRUFBQSxDQUFBLFFBQUEsRUFBQSxrQkFBQSxFQUFBLFVBQUEsQ0FGQTtBQUdBLE1BQUEsTUFBQSxFQUFBLENBSEEsRUFBQSxDQUFBOztBQUtBLElBQUEsTUFBQSxDQUFBLGdCQUFBLENBQUEsT0FBQSxFQUFBLFVBQUEsQ0FBQSxFQUFBO0FBQ0EsVUFBQSxDQUFBLENBQUEsS0FBQSxJQUFBLENBQUEsRUFBQTtBQUNBLFFBQUEsUUFBQSxDQUFBLEtBQUEsQ0FBQSxVQUFBLENBQUE7QUFDQSxVQUFBLE9BQUEsRUFBQSxVQUFBLENBQUEsRUFBQTtBQUNBLFlBQUEsS0FBQSxHQUFBLENBQUEsQ0FBQSxLQUFBO0FBQ0EsZ0JBQUEsQ0FBQSxDQUFBLFNBQUEsSUFBQSxFQUFBLENBQUEsS0FBQSxDQUFBLGdCQUFBLEVBQUE7QUFDQSxjQUFBLGFBQUEsQ0FBQSxLQUFBLEdBQUEsS0FBQTtBQUNBLGtCQUFBLEdBQUEsR0FBQSw0Q0FBQTtBQUNBO0FBQ0Esa0JBQUEsR0FBQSxHQUFBLFFBQUEsQ0FBQSxPQUFBLENBQUEsZ0JBQUEsQ0FBQTtBQUNBLGdCQUFBLE1BQUEsRUFBQSxVQUFBLENBQUEsRUFBQTtBQUNBLGtCQUFBLEVBQUEsQ0FBQSxHQUFBLENBQUEsSUFBQSxDQUFBLHVDQUFBLEtBQUEsWUFBQTtBQUNBO0FBQ0E7QUFDQSxpQkFMQTtBQU1BLGdCQUFBLE9BQUEsRUFBQSxVQUFBLENBQUEsRUFBQTtBQUNBLGtCQUFBLE9BQUEsQ0FBQSxHQUFBLENBQUEsT0FBQSxFQUFBLENBQUE7QUFDQSxpQkFSQTtBQVNBLGdCQUFBLE9BQUEsRUFBQSxNQVRBLEVBQUEsQ0FBQTs7O0FBWUEsa0JBQUEsTUFBQSxHQUFBO0FBQ0EsZ0JBQUEsTUFBQSxFQUFBLENBQUEsQ0FBQSxLQURBLEVBQUE7O0FBR0Esa0JBQUEsTUFBQSxHQUFBLElBQUEsQ0FBQSxTQUFBLENBQUEsQ0FBQSxDQUFBLEtBQUEsQ0FBQTtBQUNBLGNBQUEsS0FBQSxDQUFBLE1BQUEsQ0FBQTtBQUNBLGNBQUEsR0FBQSxDQUFBLElBQUEsQ0FBQSxNQUFBLEVBQUEsR0FBQTtBQUNBLGNBQUEsR0FBQSxDQUFBLGdCQUFBLENBQUEsY0FBQSxFQUFBLHFCQUFBO0FBQ0EsY0FBQSxHQUFBLENBQUEsSUFBQSxDQUFBLE1BQUE7QUFDQTtBQUNBO0FBQ0EsV0E3QkE7QUE4QkEsVUFBQSxNQUFBLEVBQUEsWUFBQSxDQUFBLENBOUJBO0FBK0JBLFVBQUEsS0FBQSxFQUFBLFVBQUEsS0FBQSxFQUFBO0FBQ0EsZ0JBQUEsQ0FBQSxHQUFBLFFBQUEsQ0FBQSxFQUFBLENBQUEsaUJBQUEsQ0FBQTtBQUNBLGNBQUEsS0FBQSxFQUFBLFFBREEsRUFBQSxDQUFBOztBQUdBLGdCQUFBLEtBQUEsQ0FBQSxJQUFBLElBQUEsUUFBQSxDQUFBLEtBQUEsQ0FBQSxTQUFBLEVBQUE7QUFDQSxjQUFBLENBQUEsQ0FBQSxVQUFBLENBQUEsNkJBQUE7QUFDQSxhQUZBLE1BRUE7QUFDQSxjQUFBLENBQUEsQ0FBQSxVQUFBLENBQUEsdUJBQUEsS0FBQSxDQUFBLElBQUE7QUFDQTtBQUNBLFlBQUEsQ0FBQSxDQUFBLElBQUE7QUFDQSxXQXpDQTtBQTBDQSxVQUFBLGlCQUFBLEVBQUEsSUExQ0E7QUEyQ0EsVUFBQSxrQkFBQSxFQUFBLElBM0NBLEVBQUE7O0FBNkNBLE9BOUNBLE1BOENBLElBQUEsQ0FBQSxDQUFBLEtBQUEsSUFBQSxDQUFBLEVBQUE7QUFDQSxRQUFBLFFBQUEsQ0FBQSxLQUFBLENBQUEsZ0JBQUEsQ0FBQTtBQUNBLFVBQUEsT0FBQSxFQUFBLFVBQUEsQ0FBQSxFQUFBO0FBQ0EsWUFBQSxLQUFBLEdBQUEsQ0FBQSxDQUFBLEtBQUE7QUFDQSxnQkFBQSxDQUFBLENBQUEsU0FBQSxJQUFBLEVBQUEsQ0FBQSxLQUFBLENBQUEsZ0JBQUEsRUFBQTtBQUNBLGNBQUEsYUFBQSxDQUFBLEtBQUEsR0FBQSxLQUFBO0FBQ0Esa0JBQUEsR0FBQSxHQUFBLDRDQUFBO0FBQ0E7QUFDQSxrQkFBQSxHQUFBLEdBQUEsUUFBQSxDQUFBLE9BQUEsQ0FBQSxnQkFBQSxDQUFBO0FBQ0EsZ0JBQUEsTUFBQSxFQUFBLFVBQUEsQ0FBQSxFQUFBO0FBQ0Esa0JBQUEsT0FBQSxDQUFBLEdBQUEsQ0FBQSxNQUFBLEVBQUEsR0FBQTtBQUNBLGtCQUFBLE9BQUEsQ0FBQSxHQUFBLENBQUEsdUNBQUEsS0FBQSxZQUFBO0FBQ0Esa0JBQUEsT0FBQSxDQUFBLEdBQUEsQ0FBQSxjQUFBLEVBQUEsTUFBQTtBQUNBO0FBQ0E7QUFDQSxpQkFQQTtBQVFBLGdCQUFBLE9BQUEsRUFBQSxVQUFBLENBQUEsRUFBQTtBQUNBLGtCQUFBLE9BQUEsQ0FBQSxHQUFBLENBQUEsT0FBQSxFQUFBLENBQUE7QUFDQSxpQkFWQTtBQVdBLGdCQUFBLE9BQUEsRUFBQSxNQVhBLEVBQUEsQ0FBQTs7O0FBY0Esa0JBQUEsTUFBQSxHQUFBO0FBQ0EsZ0JBQUEsTUFBQSxFQUFBLENBQUEsQ0FBQSxLQURBLEVBQUE7O0FBR0Esa0JBQUEsTUFBQSxHQUFBLElBQUEsQ0FBQSxTQUFBLENBQUEsTUFBQSxDQUFBO0FBQ0E7QUFDQSxjQUFBLEdBQUEsQ0FBQSxJQUFBLENBQUEsTUFBQSxFQUFBLEdBQUE7QUFDQSxjQUFBLEdBQUEsQ0FBQSxnQkFBQSxDQUFBLGNBQUEsRUFBQSxxQkFBQTtBQUNBLGNBQUEsR0FBQSxDQUFBLElBQUEsQ0FBQSxNQUFBO0FBQ0EsY0FBQSxPQUFBLENBQUEsR0FBQSxDQUFBLFdBQUEsRUFBQSxNQUFBOztBQUVBO0FBQ0EsV0FoQ0E7QUFpQ0EsVUFBQSxNQUFBLEVBQUEsWUFBQTtBQUNBO0FBQ0E7QUFDQSxXQXBDQSxFQUFBOztBQXNDQSxPQXZDQSxNQXVDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBMUZBO0FBMkZBLElBQUEsTUFBQSxDQUFBLElBQUE7QUFDQTs7O0FBR0EsTUFBQSxhQUFBLEdBQUEsRUFBQSxDQUFBLEVBQUEsQ0FBQSxlQUFBLENBQUE7QUFDQSxJQUFBLEtBQUEsRUFBQSxNQURBO0FBRUEsSUFBQSxNQUFBLEVBQUEsTUFGQTtBQUdBLElBQUEsVUFBQSxFQUFBLElBSEEsRUFBQSxDQUFBOzs7QUFNQSxFQUFBLENBQUEsQ0FBQSxnQkFBQSxDQUFBLGdCQUFBLENBQUEsT0FBQSxFQUFBLFVBQUEsQ0FBQSxFQUFBO0FBQ0EsUUFBQSxFQUFBLENBQUEsS0FBQSxDQUFBLG9CQUFBLEVBQUEsRUFBQTtBQUNBLE1BQUEsV0FBQTtBQUNBLEtBRkEsTUFFQTtBQUNBLE1BQUEsRUFBQSxDQUFBLEtBQUEsQ0FBQSx3QkFBQSxDQUFBLFVBQUEsQ0FBQSxFQUFBO0FBQ0EsWUFBQSxDQUFBLENBQUEsT0FBQSxFQUFBO0FBQ0EsVUFBQSxXQUFBO0FBQ0EsU0FGQSxNQUVBO0FBQ0EsVUFBQSxLQUFBLENBQUEsdUJBQUEsQ0FBQTtBQUNBO0FBQ0EsT0FOQTtBQU9BO0FBQ0EsR0FaQTs7O0FBZUEsV0FBQSxXQUFBLEdBQUE7QUFDQSxJQUFBLENBQUEsQ0FBQSxnQkFBQSxDQUFBLEdBQUEsQ0FBQSxhQUFBO0FBQ0EsSUFBQSxFQUFBLENBQUEsS0FBQSxDQUFBLFVBQUEsQ0FBQTtBQUNBLE1BQUEsT0FBQSxFQUFBLFVBQUEsQ0FBQSxFQUFBO0FBQ0E7QUFDQSxRQUFBLE9BQUEsQ0FBQSxHQUFBLENBQUEsQ0FBQSxDQUFBLEtBQUE7QUFDQSxRQUFBLGFBQUEsQ0FBQSxLQUFBLEdBQUEsQ0FBQSxDQUFBLEtBQUE7QUFDQSxPQUxBLEVBQUE7O0FBT0E7OztBQUdBLEVBQUEsQ0FBQSxDQUFBLEtBQUEsQ0FBQSxJQUFBOztBRHhGQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBLEVBQUEsQ0FBQSxDQUFBLE1BQUEsQ0FBQSxDQUFBLEVBQUEsT0FBQTtBQUNBOztBQUVBLE1BQUEsQ0FBQSxPQUFBLEdBQUEsVUFBQTtBQUNBIiwic291cmNlc0NvbnRlbnQiOlsidmFyIEFsbG95ID0gcmVxdWlyZSgnL2FsbG95JyksXG5cdEJhY2tib25lID0gQWxsb3kuQmFja2JvbmUsXG5cdF8gPSBBbGxveS5fO1xuXG5cblxuXG5mdW5jdGlvbiBfX3Byb2Nlc3NBcmcob2JqLCBrZXkpIHtcblx0dmFyIGFyZyA9IG51bGw7XG5cdGlmIChvYmopIHtcblx0XHRhcmcgPSBvYmpba2V5XSB8fCBudWxsO1xuXHR9XG5cdHJldHVybiBhcmc7XG59XG5cbmZ1bmN0aW9uIENvbnRyb2xsZXIoKSB7XG5cdFxuXHRyZXF1aXJlKCcvYWxsb3kvY29udHJvbGxlcnMvJyArICdCYXNlQ29udHJvbGxlcicpLmFwcGx5KHRoaXMsIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cykpO1xuXHR0aGlzLl9fY29udHJvbGxlclBhdGggPSAnaW5kZXgnO1xuXHR0aGlzLmFyZ3MgPSBhcmd1bWVudHNbMF0gfHwge307XG5cblx0aWYgKGFyZ3VtZW50c1swXSkge1xuXHRcdHZhciBfX3BhcmVudFN5bWJvbCA9IF9fcHJvY2Vzc0FyZyhhcmd1bWVudHNbMF0sICdfX3BhcmVudFN5bWJvbCcpO1xuXHRcdHZhciAkbW9kZWwgPSBfX3Byb2Nlc3NBcmcoYXJndW1lbnRzWzBdLCAnJG1vZGVsJyk7XG5cdFx0dmFyIF9faXRlbVRlbXBsYXRlID0gX19wcm9jZXNzQXJnKGFyZ3VtZW50c1swXSwgJ19faXRlbVRlbXBsYXRlJyk7XG5cdH1cblx0dmFyICQgPSB0aGlzO1xuXHR2YXIgZXhwb3J0cyA9IHt9O1xuXHR2YXIgX19kZWZlcnMgPSB7fTtcblxuXHQvLyBHZW5lcmF0ZWQgY29kZSB0aGF0IG11c3QgYmUgZXhlY3V0ZWQgYmVmb3JlIGFsbCBVSSBhbmQvb3Jcblx0Ly8gY29udHJvbGxlciBjb2RlLiBPbmUgZXhhbXBsZSBpcyBhbGwgbW9kZWwgYW5kIGNvbGxlY3Rpb25cblx0Ly8gZGVjbGFyYXRpb25zIGZyb20gbWFya3VwLlxuXHRcblxuXHQvLyBHZW5lcmF0ZWQgVUkgY29kZVxuXHQkLl9fdmlld3MuaW5kZXggPSBUaS5VSS5jcmVhdGVXaW5kb3coXG57YmFja2dyb3VuZENvbG9yOlwiI2ZmZmZmZlwiLHRoZW1lOlwiVGhlbWUuQXBwQ29tcGF0LlRyYW5zbHVjZW50Lk5vVGl0bGVCYXIuRnVsbHNjcmVlblwiLGV4aXRPbkNsb3NlOnRydWUsaWQ6XCJpbmRleFwiLH1cbik7XG4kLl9fdmlld3MuaW5kZXggJiYgJC5hZGRUb3BMZXZlbFZpZXcoJC5fX3ZpZXdzLmluZGV4KTtcbiQuX192aWV3cy5jZWxkYUZvdG9zID0gVGkuVUkuY3JlYXRlVmlldyhcbnt0b3A6XCI2MGRwXCIsYm90dG9tOjAsaWQ6XCJjZWxkYUZvdG9zXCIsfVxuKTtcbiQuX192aWV3cy5pbmRleC5hZGQoJC5fX3ZpZXdzLmNlbGRhRm90b3MpO1xuJC5fX3ZpZXdzLnRvcENyZWRlbmNpYWwgPSBUaS5VSS5jcmVhdGVWaWV3KFxue3RvcDowLGhlaWdodDpcIjUwJVwiLHdpZHRoOlRpLlVJLkZJTEwsaWQ6XCJ0b3BDcmVkZW5jaWFsXCIsfVxuKTtcbiQuX192aWV3cy5jZWxkYUZvdG9zLmFkZCgkLl9fdmlld3MudG9wQ3JlZGVuY2lhbCk7XG4kLl9fdmlld3MuZnJvbnRhbCA9IFRpLlVJLmNyZWF0ZVZpZXcoXG57Ym9yZGVyUmFkaXVzOlwiMzBkcFwiLGhlaWdodDpcIjkwJVwiLHdpZHRoOlRpLlVJLkZJTEwsYm9yZGVyQ29sb3I6XCIjQjlDRkUyXCIsdG91Y2hFbmFibGVkOmZhbHNlLGlkOlwiZnJvbnRhbFwiLH1cbik7XG4kLl9fdmlld3MudG9wQ3JlZGVuY2lhbC5hZGQoJC5fX3ZpZXdzLmZyb250YWwpO1xuJC5fX3ZpZXdzLmJvdHRvbUNyZWRlbmNpYWwgPSBUaS5VSS5jcmVhdGVWaWV3KFxue2JvdHRvbTowLGhlaWdodDpcIjUwJVwiLHdpZHRoOlRpLlVJLkZJTEwsaWQ6XCJib3R0b21DcmVkZW5jaWFsXCIsfVxuKTtcbiQuX192aWV3cy5jZWxkYUZvdG9zLmFkZCgkLl9fdmlld3MuYm90dG9tQ3JlZGVuY2lhbCk7XG4kLl9fdmlld3MucmV2ZXJzbyA9IFRpLlVJLmNyZWF0ZVZpZXcoXG57Ym9yZGVyUmFkaXVzOlwiMzBkcFwiLGhlaWdodDpcIjkwJVwiLHdpZHRoOlRpLlVJLkZJTEwsYm9yZGVyQ29sb3I6XCIjQjlDRkUyXCIsdG91Y2hFbmFibGVkOmZhbHNlLGlkOlwicmV2ZXJzb1wiLH1cbik7XG4kLl9fdmlld3MuYm90dG9tQ3JlZGVuY2lhbC5hZGQoJC5fX3ZpZXdzLnJldmVyc28pO1xuZXhwb3J0cy5kZXN0cm95ID0gZnVuY3Rpb24gKCkge307XG5cblx0Ly8gbWFrZSBhbGwgSURlZCBlbGVtZW50cyBpbiAkLl9fdmlld3MgYXZhaWxhYmxlIHJpZ2h0IG9uIHRoZSAkIGluIGFcblx0Ly8gY29udHJvbGxlcidzIGludGVybmFsIGNvZGUuIEV4dGVybmFsbHkgdGhlIElEZWQgZWxlbWVudHMgd2lsbFxuXHQvLyBiZSBhY2Nlc3NlZCB3aXRoIGdldFZpZXcoKS5cblx0Xy5leHRlbmQoJCwgJC5fX3ZpZXdzKTtcblxuXHQvLyBDb250cm9sbGVyIGNvZGUgZGlyZWN0bHkgZnJvbSB0aGUgZGV2ZWxvcGVyJ3MgY29udHJvbGxlciBmaWxlXG5cdF9fTUFQTUFSS0VSX0NPTlRST0xMRVJfQ09ERV9fXG5cblx0Ly8gR2VuZXJhdGVkIGNvZGUgdGhhdCBtdXN0IGJlIGV4ZWN1dGVkIGFmdGVyIGFsbCBVSSBhbmRcblx0Ly8gY29udHJvbGxlciBjb2RlLiBPbmUgZXhhbXBsZSBkZWZlcnJlZCBldmVudCBoYW5kbGVycyB3aG9zZVxuXHQvLyBmdW5jdGlvbnMgYXJlIG5vdCBkZWZpbmVkIHVudGlsIGFmdGVyIHRoZSBjb250cm9sbGVyIGNvZGVcblx0Ly8gaXMgZXhlY3V0ZWQuXG5cdFxuXG5cdC8vIEV4dGVuZCB0aGUgJCBpbnN0YW5jZSB3aXRoIGFsbCBmdW5jdGlvbnMgYW5kIHByb3BlcnRpZXNcblx0Ly8gZGVmaW5lZCBvbiB0aGUgZXhwb3J0cyBvYmplY3QuXG5cdF8uZXh0ZW5kKCQsIGV4cG9ydHMpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IENvbnRyb2xsZXI7XG4iLCJ2YXIgaW1hZ2VuRnJvbnRhbCA9IFRpLlVJLmNyZWF0ZUltYWdlVmlldyh7XG4gIHdpZHRoOiBcIjEwMCVcIixcbiAgaGVpZ2h0OiBcIjEwMCVcIixcbiAgYXV0b3JvdGF0ZTogdHJ1ZSB9KTtcblxuXG5cbiQudG9wQ3JlZGVuY2lhbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG4gIGlmIChUaS5NZWRpYS5oYXNDYW1lcmFQZXJtaXNzaW9ucygpKSB7XG4gICAgb3BlbkNhbWVyYWYoKTtcbiAgfSBlbHNlIHtcbiAgICBUaS5NZWRpYS5yZXF1ZXN0Q2FtZXJhUGVybWlzc2lvbnMoZnVuY3Rpb24gKGUpIHtcbiAgICAgIGlmIChlLnN1Y2Nlc3MpIHtcbiAgICAgICAgb3BlbkNhbWVyYWYoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFsZXJ0KCdZb3UgZGVuaWVkIHBlcm1pc3Npb24nKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufSk7XG5cbnZhciBpbWFnZTtcblxuZnVuY3Rpb24gb3BlbkNhbWVyYWYoKSB7XG4gICQuZnJvbnRhbC5hZGQoaW1hZ2VuRnJvbnRhbCk7XG4gIHZhciBkaWFsb2cgPSBUaXRhbml1bS5VSS5jcmVhdGVPcHRpb25EaWFsb2coe1xuICAgIHRpdGxlOiAnU2VsZWNjaW9uIGVsIFRpcG8gZGUgSW1hZ2VuJyxcbiAgICBvcHRpb25zOiBbJ0NhbWFyYScsICdHYWxlcmlhIGRlIEZvdG9zJywgJ0NhbmNlbGFyJ10sXG4gICAgY2FuY2VsOiAyIH0pO1xuXG4gIGRpYWxvZy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG4gICAgaWYgKGUuaW5kZXggPT0gMCkge1xuICAgICAgVGl0YW5pdW0uTWVkaWEuc2hvd0NhbWVyYSh7XG4gICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgaW1hZ2UgPSBlLm1lZGlhO1xuICAgICAgICAgIGlmIChlLm1lZGlhVHlwZSA9PSBUaS5NZWRpYS5NRURJQV9UWVBFX1BIT1RPKSB7XG4gICAgICAgICAgICBpbWFnZW5Gcm9udGFsLmltYWdlID0gaW1hZ2U7XG4gICAgICAgICAgICB2YXIgdXJsID0gJ2h0dHBzOi8vd3d3LmlkZWFzaGFwcHkuY29tL2Fob3JyYS9vdHJvLnBocCc7XG4gICAgICAgICAgICAvL3ZhciB1cmwgPSBcImh0dHA6Ly93d3cubWFyay00My5uZXQvbWFyazQzLXNlcnZpY2UvdjEvYXBpLWRyaXZlL3N1YmlyLWltYWdlblwiXG4gICAgICAgICAgICB2YXIgeGhyID0gVGl0YW5pdW0uTmV0d29yay5jcmVhdGVIVFRQQ2xpZW50KHtcbiAgICAgICAgICAgICAgb25sb2FkOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIFRpLkFQSS5pbmZvKCdJbmZvIHJlY2VpdmVkIGZyb20gdGhlIHVwbG9hZGluZzogJyArIHRoaXMucmVzcG9uc2VUZXh0KTtcbiAgICAgICAgICAgICAgICAvLyB2YXIganNvbiA9IEpTT04ucGFyc2UodGhpcy5yZXNwb25zZVRleHQpO1xuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwiSlNPTiA9IFwiLCBqc29uKTtcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgb25lcnJvcjogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkVycm9yXCIsIGUpO1xuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICB0aW1lb3V0OiAyMDAwMDAgfSk7XG5cblxuICAgICAgICAgICAgdmFyIHBhcmFtcyA9IHtcbiAgICAgICAgICAgICAgbXlmaWxlOiBlLm1lZGlhIH07XG5cbiAgICAgICAgICAgIHZhciBhbGVydGEgPSBKU09OLnN0cmluZ2lmeShlLm1lZGlhKTtcbiAgICAgICAgICAgIGFsZXJ0KGFsZXJ0YSk7XG4gICAgICAgICAgICB4aHIub3BlbihcIlBPU1RcIiwgdXJsKTtcbiAgICAgICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKCdDb250ZW50LVR5cGUnLCAnbXVsdGlwYXJ0L2Zvcm0tZGF0YScpO1xuICAgICAgICAgICAgeGhyLnNlbmQoYWxlcnRhKTtcbiAgICAgICAgICAgIC8vY29uc29sZS5sb2coXCJQYXJhbWF0cm9zID1cIiwgcGFyYW1zKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGNhbmNlbDogZnVuY3Rpb24gKCkge30sXG4gICAgICAgIGVycm9yOiBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICB2YXIgYSA9IFRpdGFuaXVtLlVJLmNyZWF0ZUFsZXJ0RGlhbG9nKHtcbiAgICAgICAgICAgIHRpdGxlOiAnQ2FtZXJhJyB9KTtcblxuICAgICAgICAgIGlmIChlcnJvci5jb2RlID09IFRpdGFuaXVtLk1lZGlhLk5PX0NBTUVSQSkge1xuICAgICAgICAgICAgYS5zZXRNZXNzYWdlKCdEZXZpY2UgZG9lcyBub3QgaGF2ZSBjYW1lcmEnKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYS5zZXRNZXNzYWdlKCdVbmV4cGVjdGVkIGVycm9yOiAnICsgZXJyb3IuY29kZSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGEuc2hvdygpO1xuICAgICAgICB9LFxuICAgICAgICBhbGxvd0ltYWdlRWRpdGluZzogdHJ1ZSxcbiAgICAgICAgc2F2ZVRvUGhvdG9HYWxsZXJ5OiB0cnVlIH0pO1xuXG4gICAgfSBlbHNlIGlmIChlLmluZGV4ID09IDEpIHtcbiAgICAgIFRpdGFuaXVtLk1lZGlhLm9wZW5QaG90b0dhbGxlcnkoe1xuICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgIGltYWdlID0gZS5tZWRpYTtcbiAgICAgICAgICBpZiAoZS5tZWRpYVR5cGUgPT0gVGkuTWVkaWEuTUVESUFfVFlQRV9QSE9UTykge1xuICAgICAgICAgICAgaW1hZ2VuRnJvbnRhbC5pbWFnZSA9IGltYWdlO1xuICAgICAgICAgICAgdmFyIHVybCA9ICdodHRwczovL3d3dy5pZGVhc2hhcHB5LmNvbS9haG9ycmEvb3Ryby5waHAnO1xuICAgICAgICAgICAgLy92YXIgdXJsID0gXCJodHRwOi8vd3d3Lm1hcmstNDMubmV0L21hcms0My1zZXJ2aWNlL3YxL2FwaS1kcml2ZS9zdWJpci1pbWFnZW5cIlxuICAgICAgICAgICAgdmFyIHhociA9IFRpdGFuaXVtLk5ldHdvcmsuY3JlYXRlSFRUUENsaWVudCh7XG4gICAgICAgICAgICAgIG9ubG9hZDogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygndXJsICcsIHVybCk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0luZm8gcmVjZWl2ZWQgZnJvbSB0aGUgdXBsb2FkaW5nOiAnICsgdGhpcy5yZXNwb25zZVRleHQpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwicGFyYW1ldHJvID0gXCIsIGFsZXJ0YSk7XG4gICAgICAgICAgICAgICAgLy8gdmFyIGpzb24gPSBKU09OLnBhcnNlKHRoaXMucmVzcG9uc2VUZXh0KTtcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhcIkpTT04gPSBcIiwganNvbik7XG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIG9uZXJyb3I6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJFcnJvclwiLCBlKTtcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgdGltZW91dDogMjAwMDAwIH0pO1xuXG5cbiAgICAgICAgICAgIHZhciBwYXJhbXMgPSB7XG4gICAgICAgICAgICAgIG15ZmlsZTogZS5tZWRpYSB9O1xuXG4gICAgICAgICAgICB2YXIgYWxlcnRhID0gSlNPTi5zdHJpbmdpZnkocGFyYW1zKTtcbiAgICAgICAgICAgIC8vYWxlcnQoYWxlcnRhKTtcbiAgICAgICAgICAgIHhoci5vcGVuKFwiUE9TVFwiLCB1cmwpO1xuICAgICAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoJ0NvbnRlbnQtVHlwZScsICdtdWx0aXBhcnQvZm9ybS1kYXRhJyk7XG4gICAgICAgICAgICB4aHIuc2VuZChhbGVydGEpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJBTEVSVEEgPSBcIiwgYWxlcnRhKTtcblxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgY2FuY2VsOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgLy91c2VyIGNhbmNlbGxlZCB0aGUgYWN0aW9uIGZyb24gd2l0aGluXG4gICAgICAgICAgLy90aGUgcGhvdG8gZ2FsbGVyeVxuICAgICAgICB9IH0pO1xuXG4gICAgfSBlbHNlIHtcbiAgICAgIC8vY2FuY2VsIHdhcyB0YXBwZWRcbiAgICAgIC8vdXNlciBvcHRlZCBub3QgdG8gY2hvb3NlIGEgcGhvdG9cbiAgICB9XG4gIH0pO1xuICBkaWFsb2cuc2hvdygpO1xufVxuXG5cbnZhciBpbWFnZW5SZXZlcnNvID0gVGkuVUkuY3JlYXRlSW1hZ2VWaWV3KHtcbiAgd2lkdGg6IFwiMTAwJVwiLFxuICBoZWlnaHQ6IFwiMTAwJVwiLFxuICBhdXRvcm90YXRlOiB0cnVlIH0pO1xuXG5cbiQuYm90dG9tQ3JlZGVuY2lhbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG4gIGlmIChUaS5NZWRpYS5oYXNDYW1lcmFQZXJtaXNzaW9ucygpKSB7XG4gICAgb3BlbkNhbWVyYXIoKTtcbiAgfSBlbHNlIHtcbiAgICBUaS5NZWRpYS5yZXF1ZXN0Q2FtZXJhUGVybWlzc2lvbnMoZnVuY3Rpb24gKGUpIHtcbiAgICAgIGlmIChlLnN1Y2Nlc3MpIHtcbiAgICAgICAgb3BlbkNhbWVyYXIoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFsZXJ0KCdZb3UgZGVuaWVkIHBlcm1pc3Npb24nKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufSk7XG5cblxuZnVuY3Rpb24gb3BlbkNhbWVyYXIoKSB7XG4gICQuYm90dG9tQ3JlZGVuY2lhbC5hZGQoaW1hZ2VuUmV2ZXJzbyk7XG4gIFRpLk1lZGlhLnNob3dDYW1lcmEoe1xuICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAvLyBkaXNwbGF5IGltYWdlIGluZm9ybWF0aW9uOlxuICAgICAgY29uc29sZS5sb2coZS5tZWRpYSk7XG4gICAgICBpbWFnZW5SZXZlcnNvLmltYWdlID0gZS5tZWRpYTtcbiAgICB9IH0pO1xuXG59XG5cblxuJC5pbmRleC5vcGVuKCk7Il0sInNvdXJjZVJvb3QiOiIvVXNlcnMvdXNlcjAwMS9Eb2N1bWVudHMvQXBwY2VsZXJhdG9yX1N0dWRpb19Xb3Jrc3BhY2Uvb2NyIn0=
